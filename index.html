<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>隨機驗證碼</title>
	<style type="text/css">

		#code{
			width:100px;
			height:100px;
			background-color:#ddd;
			padding:10px;
			line-height:100px;
			text-align:center;
			font-size:20px;
			color:red;
			font-weight:bold;
			margin: 0 auto;
		}

		input {
			outline: none;

		}

		#newCode {
			margin:10px auto;
			display: block;

		}

		#validate {
			margin:10px auto;
			display: block
		}

	</style>
</head>
<body>
	
<div id="code"></div>
<input type="text" name="" id="newCode">
<input type="button" name="" id="validate" value="驗證">

<script type="text/javascript">

	window.onload = function(){
			//保存全局，與新輸入的驗證碼效驗
		var code;
		//獲取對應標籤
		var codeDiv = document.getElementById('code');
		var newCodeInput = document.getElementById('newCode');
		var validate = document.getElementById('validate');
		// 加載頁面獲取對應驗證碼
		creatCode()

		//獲取min到max之間的整數 (1~100)
		function random(max,min){
			return Math.floor(Math.random() * (max-min) + min);
		}
		function creatCode (){
				//設置默認空字串
				code = '';
				//設置長度
				var codeLength = 4;
				var randomCode = [0,1,2,3,4,5,6,7,8,9,'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R', 'S','T','U','V','W','X','Y','Z'];
				for(var i = 0; i < codeLength; i++){
					//設置隨機範圍0~36
					var index = random(0,36);
					code += randomCode[index];
				}
				codeDiv.innerHTML = code;

		}

		//驗證按鈕效驗
		validate.onclick = function(){

			var newCode = newCodeInput.value.toUpperCase();
			if(newCode === code) {

				window.location.href = 'https://www.bilibili.com';
			}else{
				//驗證失敗
				alert('驗證碼不正確，請重新輸入');
				//輸入框置空
				newCodeInput.value= '';
				//重新獲取驗證碼
				creatCode();
			}
		}

	}

</script>
	
</body>
</html>